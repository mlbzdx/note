## 组件名 : `LazyLoadImg`

> 参考一下组件命名规范：https://juejin.cn/post/6961226664869101605

需要体积小的占位图，以及原图。

> 如何压缩图片体积？

参考文章：https://zhuanlan.zhihu.com/p/385452484

推荐使用window自带的图片查看工具进行图片压缩，来设计占位图。

这里就不再使用静态资源了，压缩了四张图片，并将其占位图以及原图上传至阿里云图床后，链接如下：

| 序号 | 原图链接                                                     | 占位图链接                                                   |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 01   | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/01.jpg            | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/z01.jpg           |
| 02   | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/02.jpg            | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/z02.jpg           |
| 03   | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/%E9%9B%B6%E8%A1%A3.jpg | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/z%E9%9B%B6%E8%A1%A3.jpg |
| 04   | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/04.jpg            | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/z04.jpg           |
| 05   | 不用进行设置，后面链接为文章预览占位图                       | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/zv.jpg            |

## 组件效果展示：

![alt tag](http://mdrs.yuanjin.tech/img/20201115132049.gif)

## 组件实现逻辑

> 为什么需要这个组件？

首先首页的图片加载，文章页各个项目的预览图都需要使用到图片懒加载组件；其次，图片懒加载能够保证网络不好的情况下有容易加载出来的占位图存在，从而减轻因网络问题而导致的页面丑化，用户体验不佳等体验。

组件的实现原理：

因为不同图片体积不同，而对应的加载时间也会因此不同，为避免大图体积过大长时间加载不出来导致页面长期空白的情况。预先设置了占位图和原图，占位图体积比原图小，更易加载。

占位图加载所需的时间较少，先加载出来，此时，大图还未加载出来，设置大图透明读为0，为占位图添加模糊显示的效果。

给大图注册load事件，当大图加载完成后，会调用该函数。

当函数调用时，说明大图已经加载成功（成功获取到大图的网络请求，将渲染到页面上），先设置过渡属性，并根据过渡时间设置过渡的计时函数，将大图的透明度设置为1。

当计时结束后，此时大图已经显示到页面上了，抛出后续操作事件让父组件进行处理，同时将占位图的v-if设置为false，删除占位图。

具体实现过程：

问题1：大图小图如何同时再同一个位置显示，并撑满容器？

使用相对定位和绝对定位

问题2：怎样添加模糊效果的遮罩层？毛玻璃效果如何实现？

设置`filter: blur(2vw);`

参考文章：https://blog.csdn.net/qq_46590483/article/details/119857971

问题3：怎样增加或删除大图或小图的渲染节点？

使用vue的v-if指令

样式设计：

* 父元素撑满容器
* 遮罩层的效果设置在父元素上，父元素相对定位
* 子元素为两个`img`元素，子元素绝对定位，添加v-if指令，宽高撑满父容器。
* 为大图注册加载事件，大图加载完成后，将大图显示出来（opacity设为1），设置计时函数，为动画过渡的渲染提供间隙，避免导致页面出现空白。计时函数完成后，将通过v-if指令将占位图删除，同时向父组件抛出大图加载完成事件。

## 组件属性

| 属性       | 类型   | 默认值                                            | 必须 | 作用                                                 |
| ---------- | ------ | ------------------------------------------------- | ---- | ---------------------------------------------------- |
| `midImg`   | String | https://mlbzdx.oss-cn-chengdu.aliyuncs.com/zv.jpg | 是   | 显示图片之前的预览图                                 |
| `bigImg`   | String | 无                                                | 是   | 显示原图                                             |
| `duration` | Number | 1000                                              | 是   | 原图加载出来到原图渲染到页面上呈现给用户的间隔时间。 |

