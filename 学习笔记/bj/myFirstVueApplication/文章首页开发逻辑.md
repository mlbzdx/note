首页是一个轮播图，其实也是轮播图的实现逻辑。

将一个轮播图的具体样式做好，然后进行循环，生成多个轮播图。改变容器位置来实现轮播图移动。

轮播图的显示框就写一些公共样式。一个具体的轮播图样式通过组件来实现。

# 1.轮播图显示框

## 页面结构

应该包括那些内容：

* 一个宽高固定的轮播显示容器 `home-container`
* 一个需要进行位置移动的轮播图包裹容器 `carousel-wrapper`
  * 进行循环生成的轮播图组件
* 上下翻页图形UI
* 页码图形UI

好像没了。

## 静态样式

### 显示容器

宽高撑满父元素，设置相对定位

### 轮播图包裹容器

宽高撑满父元素

### 循环生成轮播图组件

获取网络数据，循环生成组件

### 上下翻页图形UI

调整大小，图标颜色，绝对定位，位置左右居中，距顶部底部一段距离，上下浮动动画效果。

### 页码图形UI

获取网络数据，循环生成页码图标，靠右侧绝对定位，图形圆角化，设置当前页的选中样式，图形可视化阴影，

图标的选中效果存在随背景颜色变化而可视化程度降低的可能，所以添加图形形状大小改变的效果。

怎样在一个图标宽高变化时，不影响其他同级图标的布局。

## 动态样式与功能

### 翻页效果

本质上是改变包裹容器的`marginTop`值，这里主要直接设置会发生margin塌陷，需要先触发`bfc`,才能保障`home-container`容器一直显示在页面中央，不会随包裹容器移动而移动。

获取`home-container`容器的宽高，同时还需要注册窗口尺寸变化的事件，以监听窗口变化后的高度

建立轮播图滚动距离与页码之间的关系，通过改变页码数据来实现`maginTop`值的变化。

事件包括了整个首页的鼠标滚动事件，上下箭头翻页的鼠标点击事件，页码的点击翻页事件。

滚动事件要避免翻页时多次触发，通过添加防抖函数的方法，过渡事件来保障翻页的顺畅进行。

# 2.轮播图组件

## 页面结构

* 一个加载图片的组件
* 标题
* 描述

## 静态样式

### 加载图片的组件

撑满父元素，图片宽高超过父容器110%，以便实现图片在容器中移动的效果。情况比较复杂，包裹容器要宽高自适应，但子元素又要撑满祖先元素。

### 标题和描述

靠左绝对定位，添加了文字阴影来在不同背景图像保证可视化，调整了大小

## 动态样式

### 鼠标移动，图片移动的效果

这个东西很复杂，原理，细节，非常容易出错。

基本原理

内外两层容器，外层容器溢出内层容器，内层容器设置溢出部分隐藏。

内层容器设置为相对定位，外层容器设置为绝对定位，默认left和top值均为0。

给内层容器和外层容器的元素添加vue提供的ref属性，以便直接操作dom。

给内层容器注册鼠标移动和鼠标移出的事件。

现在鼠标要在内层容器的宽高范围内移动，同时，外层容器要在内外层容器宽高差的范围内移动。

两者之间存在者比例关系。即：

鼠标的相对坐标 / 鼠标可移动的范围 = 外层容器的相对坐标 /外层容器的可移动范围。

此时，外层容器的相对坐标 = 鼠标的相对坐标 * 外层容器的可移动范围 / 鼠标的可移动范围。

注意：这里的相对坐标均是相对于相对定位的元素，即内层容器左上角的坐标位置。

求出外层容器的相对坐标，结果应为负值。设置外层容器的style样式，添加transform属性，修改translate的横纵坐标偏移量来矫正外层容器的位置。

涉及到的相关变量求值

鼠标的相对坐标：注册移动事件时会提供鼠标相对于视口的距离参数，同时可以直接操作内层容器的dom，通过getBoundingReact()方法获取内层容器相对于视口的距离，两者相减即可获得鼠标相对于内层容器的相对坐标。

外层容器的可移动范围：外层容器的宽高减去内层容器的宽高。

外层容器的居中效果

一开始挂载时，外层容器要显示在内层容器中央，窗口调整时，外层容器显示在内层图片中央，鼠标移除内层容器时，外层容器恢复到内层容器中央的位置。

将鼠标的相对位置设置为内层容器二分之一宽高即可。

关于涉及到相关变量的动态变化。

内层容器的宽高和外层容器的宽高均会随着视口尺寸的调整而发生相应的变化。因此除了挂载时获取内层容器和外层容器的宽高，同时还需要window注册resize事件，监听页面内相关变量宽高尺寸的变化。

同时注意：不能在vue的data或者computed配置中直接操作dom，因为此时配置还未注入，虚拟dom还未挂载渲染，此时不能获取到这些数据。但可以现在data中初始化一个变量，再在后面的方法或生命周期函数中将dom相关的数据赋值给该变量。

**注：获取元素宽高最好要实时获取，即在事件中进行获取，这样才能保证获取元素的宽高为窗口调整变化后的最新实时宽高。**
