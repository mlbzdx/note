# 文章页开发逻辑

## 目录：

> [TOC]

## 1.获取远程数据

首先获取网络数据。

文章页部分有两个需要获取到的网络数据

一个是文章页的各篇文章及简介内容，一个是文章的分类目录列表。

由于没有后端的网络接口，所以数据需要根据接口文档进行模拟。

### 1-1.接口文档撰写

先查看接口文档（接口文档试着自己编写一下，锻炼一下经验）。

可以借用工具`Apifox`网页进行接口文档的编写。

> 接口文档编写需要注意到的要素：
>
> * 接口文档名称
> * 接口路径
> * 接口的请求方法
> * 接口的请求参数
>   * Query
>   * Header
>   * Body
> * 接口的响应
>   * 响应的状态码
>   * 响应的数据格式
>   * 响应的数据结构

#### 1-1-1.文章页的接口文档

* 接口名称: blog

* 接口路径 : /api/blog

* 接口方法 : GET

* 接口请求参数：

  | key        | 必填 | default | 含义                 |
  | ---------- | ---- | ------- | -------------------- |
  | page       | 否   | 1       | 当前页码             |
  | limit      | 否   | 10      | 页容量               |
  | categoryId | 否   | -1      | 所属分类，-1表示全部 |
  | keyword    | 否   | ''      | 模糊查询的关键词     |

* 接口响应规格：

  ```js
  {
  	code: 0,
  	msg: "",
  	data: { 
  		total: 786, #总数
  		rows: [ # 当前页列表数据
  			{
  				id:<id>,
  				title: "标题",
  				description: "描述",
  				category: { #所属分类
  					id: 3,
  					name: "分类3"
  				},
  				scanNumber: 10,
  				commentNumber: 30,
  				thumb: "缩略图地址",
  				createDate: 1604976798936
  			}
  		]
  	}
  ```

  

#### 1-1-2.文章分类的接口文档

* 接口名称 ： blogType

* 接口路径 ： /api/blogType

* 接口方法 ： GET

* 接口请求参数 ：无

* 接口响应规格 ： 

  ```js
  {
  	code: 0,
  	msg: "",
  	data: [{
      id: <id>,
      name: "分类1",
      articleCount: 10, #该分类下文章的数量
      order: 1
  	}, {
      id: <id>,
      name: "分类2",
      articleCount: 10, #该分类下文章的数量
      order: 2
  	}, {
      id: <id>,
      name: "分类3",
      articleCount: 10, #该分类下文章的数量
      order: 3
  	}
  }
  ```

## 2.发出网络请求

使用已经写好的api文件目录中的`ajaxs`实例创建发送`blog`和`blogtype`请求的函数。

## 3.模拟网络请求

拦截模拟网络请求，这里需要使用到mockjs第三方库进行，

要拦截的地址如果是变化的，需要使用到正则表达式。

如果要根据地址栏的参数动态模拟数据的数目等信息，需要借助第三方库`querystring`。

## 路由跳转逻辑

###   路由规则

| 路由规则                      | 效果                                     |
| ----------------------------- | ---------------------------------------- |
| /blog                         | 查看全部文章                             |
| /blog?page-3&limit=30         | 查看全部文章，显示第3页，每页30条        |
| /blog/cate/1                  | 查看分类为id为1的文章                    |
| /blog/cate/4/?page=2&limit=20 | 查看分类id为4的文章，显示第2页，每页20条 |

### 路由配置

